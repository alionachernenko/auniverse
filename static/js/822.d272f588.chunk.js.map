{"version":3,"file":"static/js/822.d272f588.chunk.js","mappings":"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","sources":["pages/Catalog/Catalog.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { fetchGameBySearchQuery, fetchNewGames } from 'utils';\nimport {\n  Pagination,\n  SearchForm,\n  Loader,\n  GameList,\n  ErrorComponent,\n} from 'components';\nimport styled from 'styled-components';\nimport { useSearchParams } from 'react-router-dom';\nimport { useMemo } from 'react';\n\nconst Catalog = () => {\n  const [games, setGames] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  const [params, setParams] = useSearchParams();\n\n  const searchParams = useMemo(() => Object.fromEntries([...params]), [params]);\n\n  const {\n    ordering = null,\n    query = null,\n    genre = null,\n    page = 1,\n    platform = null,\n    developer = null\n  } = searchParams;\n\n  useEffect(() => {\n    setIsLoading(true);\n    if (query || ordering || genre || platform || developer) {\n      fetchGameBySearchQuery(query, page, ordering, genre, platform, developer)\n        .then(({ data }) => {\n          const { results, count } = data;\n\n          setGames(results);\n          setTotalPages(count / 20);\n\n          setIsLoading(false);\n        })\n        .catch(error => {\n          console.log(error);\n          setIsError(true);\n          setIsLoading(false);\n        });\n    } else {\n      //temporarily solution\n      fetchNewGames(page, 20)\n        .then(({ data }) => {\n          const { results, count } = data;\n\n          setGames(results);\n          setTotalPages(count / 20);\n          setIsLoading(false);\n        })\n        .catch(error => {\n          console.log(error);\n          setIsError(true);\n          setIsLoading(false);\n        });\n    }\n  }, [query, ordering, genre, page, setParams, searchParams, platform, developer]);\n\n  const handlePageChange = page => {\n    setParams({ ...searchParams, page: page + 1 });\n\n    setIsLoading(true);\n\n    window.scroll({\n      top: 0,\n    });\n  };\n  return (\n    <Page>\n      {isError ? (\n        <ErrorComponent />\n      ) : (\n        <>\n          <SearchForm className={'catalog'} />\n          {isLoading ? (\n            <Loader className={'loader-catalog'} color={'white'} />\n          ) : games.length !== 0 ? (\n            <>\n              <GameList games={games} />\n              <Pagination\n                totalPages={totalPages <= 500 ? totalPages : 500}\n                changePage={handlePageChange}\n                page={page}\n              />\n            </>\n          ) : (\n            <h1 style={{ color: 'white' }}>No matches</h1>\n          )}\n        </>\n      )}\n    </Page>\n  );\n};\n\nconst Page = styled.div`\n  padding: 10px 0 40px 0;\n  margin-top: 61px;\n  box-sizing: border-box;\n  min-height: calc(100vh - 61px);\n  position: relative;\n  background-color: black;\n  display: flex;\n  flex-direction: column;\n  align-items: space-between;\n  gap: 20px;\n\n  @media screen and (min-width: 1200px) {\n    padding: 40px 0;\n  }\n`;\n\nexport default Catalog;\n"],"names":["Page","styled","_templateObject","_taggedTemplateLiteral","_useState","useState","_useState2","_slicedToArray","games","setGames","_useState3","_useState4","totalPages","setTotalPages","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","isError","setIsError","_useSearchParams","useSearchParams","_useSearchParams2","params","setParams","searchParams","useMemo","Object","fromEntries","_toConsumableArray","_searchParams$orderin","ordering","_searchParams$query","query","_searchParams$genre","genre","_searchParams$page","page","_searchParams$platfor","platform","_searchParams$develop","developer","useEffect","fetchGameBySearchQuery","then","_ref","data","results","count","catch","error","console","log","fetchNewGames","_ref2","_jsx","children","ErrorComponent","_jsxs","_Fragment","SearchForm","className","Loader","color","length","GameList","Pagination","changePage","_objectSpread","window","scroll","top","style"],"sourceRoot":""}