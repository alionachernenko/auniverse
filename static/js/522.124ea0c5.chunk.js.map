{"version":3,"file":"static/js/522.124ea0c5.chunk.js","mappings":"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","sources":["pages/GameDescription/GameDescription.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\"\nimport { useParams } from \"react-router-dom\"\nimport {\n    Loader, StoresList, BookmarkButton, Container, Comments, ErrorComponent,\n    GameOverview, GameScreenshots, GoBackLink\n} from \"components\";\nimport {authContext} from 'context'\n\nimport styled from \"styled-components\";\nimport { fetchBookmarks, fetchComments, fetchGameById, fetchScreenshots, fetchStores} from \"utils\";\n\nconst formatComments = (comments) => {\n    return Object.entries(comments).map(el => {\n        return {[el[0]] : el[1]}\n    })\n}\n\nconst GameDescription = () => {\n    const { isLoggedIn, userId } = useContext(authContext)\n    const [isBookmark, setIsBookmark] = useState()\n\n    const [title, setTitle] = useState('')\n    const [screenshots, setScreenshots] = useState([])\n    const [description, setDescription] = useState('')\n    const [stores, setStores] = useState([])\n    const [year, setYear] = useState('')\n    const [isLoading, setIsLoading] = useState(true)\n    const [gameData, setGameData] = useState({})\n    const [comments, setComments] = useState([])\n    const [isError, setIsError] = useState(false)\n\n    const { gameSlug } = useParams()\n\n    useEffect(() => {\n        Promise.all([fetchGameById(gameSlug),\n            fetchScreenshots(gameSlug),\n            fetchComments(gameSlug),\n            fetchBookmarks(userId),\n            fetchStores(gameSlug)\n        ]).then(res => {\n            const [game, screenshots, comments, bookmarks, stores] = res\n            const {data} = game\n            const {name, description_raw, released} = data\n            const { results } = screenshots.data\n            \n            setGameData(data)\n            setTitle(name)\n            setDescription(description_raw)\n            setStores(stores.data.results)\n            setYear(released)\n            setScreenshots(results)\n\n            if (bookmarks.val()) {\n                setIsBookmark(Object.keys(bookmarks.val()).some(el => el === gameSlug))\n            }\n\n            if(comments.val()) setComments(formatComments(comments.val()))\n\n            setIsLoading(false)\n        }).catch(error => {\n                console.log(error)\n                setIsError(true)\n                setIsLoading(false)\n            })\n    }, [gameSlug, userId])\n\n    return (\n        <Page>\n            <Container>\n            {isLoading ? <Loader color={'white'} /> : isError ? <ErrorComponent/> :\n            <>\n                <GoBackLink/>\n                <div style={{display: 'flex'}}>\n                    <Info>\n                        <div>\n                            <Meta>\n                                <Title>{title}</Title>\n                                { year && <Year>{year.slice(0, 4)}</Year> }\n                                {isLoggedIn && <BookmarkButton\n                                    gameData={gameData}\n                                    isBookmark={isBookmark}\n                                    setIsBookmark={setIsBookmark}\n                                    className='game_description'\n                                />}\n                            </Meta>\n                                {description && <GameOverview description={description} />}\n                        </div>\n                                {stores && <StoresList stores={stores} data={gameData}/>}\n                    </Info>\n                 </div>\n                                {screenshots && <GameScreenshots screenshots={screenshots} />}\n                                <Comments setComments={setComments} comments={comments} />\n            </>\n            }\n            </Container>\n        </Page> \n    )\n}\n\nconst Page = styled.div`\n    padding: 30px;\n    position: relative;\n    box-sizing: border-box;\n\n    min-height: calc(100vh - 61px);\n    background-size: cover;\n    background-position: top;\n    display: flex;\n    flex-direction: column;\n    background-color: #00021A;  \n    \n    @media screen and (min-width: 768px) {\n        padding: 60px;\n    }\n`\n\nconst Info = styled.div`\n    display: flex;\n    gap: 40px;\n    height: auto;\n    box-sizing: border-box;\n    margin-bottom: 60px;\n    width: 100%;\n\n    @media screen and (max-width: 768px) {\n        flex-direction: column;\n        margin-bottom: 30px;\n    }\n\n    @media screen and (min-width: 1200px) {\n        width: 1130px;\n    }\n`\n\nconst Meta = styled.div`\n    margin-bottom: 10px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n    position: relative;\n\n\n    @media screen and (min-width: 1200px) {\n        margin-bottom: 20px;\n        flex-direction: row;\n        align-items: center;\n        gap: 20px;\n    }\n`\nconst Title = styled.h1`\n    padding: 10px 0;\n    border-bottom: 1px solid orange;\n\n    font-size: 35px;\n    font-weight: 700;\n    text-align: left;\n    color: white;\n    \n    @media screen and (min-width: 1200px) {\n        border-bottom: 0;\n        padding: 0;\n        font-size: 50px;\n        border-right: 1px solid orange;\n        padding-right: 20px\n    }\n`\nconst Year = styled.p`\n    color: white;\n    font-weight: 700;\n    text-align: center;\n    font-size: 30px;\n\n    @media screen and (min-width: 768px) and (max-width: 1199px) {\n        margin-right: 0;\n    }\n\n    @media screen and (min-width: 1200px) {\n        font-size: 50px;\n    }\n`\nexport default GameDescription"],"names":["Page","styled","_templateObject","_taggedTemplateLiteral","Info","_templateObject2","Meta","_templateObject3","Title","_templateObject4","Year","_templateObject5","_useContext","useContext","authContext","isLoggedIn","userId","_useState","useState","_useState2","_slicedToArray","isBookmark","setIsBookmark","_useState3","_useState4","title","setTitle","_useState5","_useState6","screenshots","setScreenshots","_useState7","_useState8","description","setDescription","_useState9","_useState10","stores","setStores","_useState11","_useState12","year","setYear","_useState13","_useState14","isLoading","setIsLoading","_useState15","_useState16","gameData","setGameData","_useState17","_useState18","comments","setComments","_useState19","_useState20","isError","setIsError","gameSlug","useParams","useEffect","Promise","all","fetchGameById","fetchScreenshots","fetchComments","fetchBookmarks","fetchStores","then","res","_res","game","bookmarks","data","name","description_raw","released","results","val","Object","keys","some","el","entries","map","_defineProperty","formatComments","catch","error","console","log","_jsx","children","Container","Loader","color","ErrorComponent","_jsxs","_Fragment","GoBackLink","style","display","slice","BookmarkButton","className","GameOverview","StoresList","GameScreenshots","Comments"],"sourceRoot":""}